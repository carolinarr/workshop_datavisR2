<!DOCTYPE html><html><head><title>R: Snapshot helpers</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table style="width: 100%;"><tr><td>expect_snapshot_output {testthat}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2 id='expect_snapshot_output'>Snapshot helpers</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
</p>
<p>These snapshotting functions are questioning because they were developed
before <code><a href="../../testthat/help/expect_snapshot.html">expect_snapshot()</a></code> and we're not sure that they still have a
role to play.
</p>

<ul>
<li> <p><code>expect_snapshot_output()</code> captures just output printed to the console.
</p>
</li>
<li> <p><code>expect_snapshot_error()</code> captures an error message and
optionally checks its class.
</p>
</li>
<li> <p><code>expect_snapshot_warning()</code> captures a warning message and
optionally checks its class.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>expect_snapshot_output(x, cran = FALSE, variant = NULL)

expect_snapshot_error(x, class = "error", cran = FALSE, variant = NULL)

expect_snapshot_warning(x, class = "warning", cran = FALSE, variant = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expect_snapshot_output_:_x">x</code></td>
<td>
<p>Code to evaluate.</p>
</td></tr>
<tr><td><code id="expect_snapshot_output_:_cran">cran</code></td>
<td>
<p>Should these expectations be verified on CRAN? By default,
they are not, because snapshot tests tend to be fragile because they
often rely on minor details of dependencies.</p>
</td></tr>
<tr><td><code id="expect_snapshot_output_:_variant">variant</code></td>
<td>
<p>If non-<code>NULL</code>, results will be saved in
<code style="white-space: pre;">&#8288;_snaps/{variant}/{test.md}&#8288;</code>, so <code>variant</code> must be a single string
suitable for use as a directory name.
</p>
<p>You can use variants to deal with cases where the snapshot output varies
and you want to capture and test the variations. Common use cases include
variations for operating system, R version, or version of key dependency.
Variants are an advanced feature. When you use them, you'll need to
carefully think about your testing strategy to ensure that all important
variants are covered by automated tests, and ensure that you have a way
to get snapshot changes out of your CI system and back into the repo.</p>
</td></tr>
<tr><td><code id="expect_snapshot_output_:_class">class</code></td>
<td>
<p>Class of expected error or warning. The expectation will
always fail (even on CRAN) if an error of this class isn't seen
when executing <code>x</code>.</p>
</td></tr>
</table>

<hr /><div style="text-align: center;">[Package <em>testthat</em> version 3.2.0 <a href="00Index.html">Index</a>]</div>
</div>
</body></html>
